(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{895:function(t,s,a){"use strict";a.r(s);var e=a(72),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"控制器（controller）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#控制器（controller）"}},[t._v("#")]),t._v(" 控制器（Controller）")]),t._v(" "),a("blockquote",[a("p",[t._v("mvc 设计模式中的一个重要组成部分：C（Controller）控制器")])]),t._v(" "),a("p",[t._v("Laravel的控制器能够将相关的请求处理逻辑组成一个单独的类。控制器被存放在 "),a("code",[t._v("app/Http/Controllers")]),t._v(" 目录下。")]),t._v(" "),a("h3",{attrs:{id:"快速入门（简单使用）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#快速入门（简单使用）"}},[t._v("#")]),t._v(" 快速入门（简单使用）")]),t._v(" "),a("p",[t._v("####创建控制器。\n在"),a("code",[t._v("app/Http/Controllers")]),t._v(" 目录下创建一个 "),a("code",[t._v("TestController")]),t._v(" 控制器。")]),t._v(" "),a("p",[t._v("这里创建控制器的方式有两个：")]),t._v(" "),a("ol",[a("li",[t._v("第一个是使用命令行的方式创建。（"),a("strong",[t._v("强烈推荐")]),t._v("）"),a("br"),t._v("\n创建控制器的语法："),a("code",[t._v("php artisan make:controller 控制器名称")])]),t._v(" "),a("li",[t._v("第二个是使用正常创建文件的方式。")])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Controllers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token package"}},[t._v("Illuminate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里写一个show方法作为demo")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'Hello World !'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("blockquote",[a("p",[t._v("。控制器并不是 一定 要继承基础类。只是，你将无法使用一些便捷的功能，比如 "),a("code",[t._v("middleware")]),t._v("，"),a("code",[t._v("validate")]),t._v(" 和 "),a("code",[t._v("dispatch")]),t._v(" 方法。")])]),t._v(" "),a("h4",{attrs:{id:"注册路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册路由"}},[t._v("#")]),t._v(" 注册路由")]),t._v(" "),a("blockquote",[a("p",[t._v("laravel框架的所有控制器默认是访问不了的，必须注册路由才可以访问。")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Route::get('test/{id}', 'TestController@show');\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"浏览器访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器访问"}},[t._v("#")]),t._v(" 浏览器访问")]),t._v(" "),a("p",[t._v("注册完成后就已经可以通过浏览器去访问了。"),a("code",[t._v("http://127.0.0.1/test/110")]),t._v("。"),a("br"),t._v("\n结果：")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("Hello World !110\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#中间件"}},[t._v("#")]),t._v(" 中间件")]),t._v(" "),a("p",[t._v("之前我们说过可以在路由加中间件。然而，在控制器的"),a("strong",[t._v("构造方法")]),t._v("中指定中间件会更为便捷。在控制器"),a("strong",[t._v("构造方法")]),t._v("中使用 "),a("code",[t._v("middleware")]),t._v(" 方法，你可以很容易地将中间件指定给控制器操作。你甚至可以约束中间件只对控制器类中的某个特定方法生效：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Controller")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 创建一个新的控制器实例。\n     *\n     * @return void\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("__construct")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 auth 中间件验证")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("middleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'auth'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 log 中间件，但只对 index 方法有效")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("middleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'log'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("only")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'index'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("middleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'subscribed'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("except")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'store'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("blockquote",[a("p",[t._v("控制器的"),a("code",[t._v("中间件")]),t._v("会比路由器的中间件更加方便。一般使用控制器里面定义中间件。")])]),t._v(" "),a("h3",{attrs:{id:"restful控制器（资源控制器）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restful控制器（资源控制器）"}},[t._v("#")]),t._v(" RESTful控制器（资源控制器）")]),t._v(" "),a("blockquote",[a("h2",{attrs:{id:"什么是restful？rest-描述了一个架构样式的互联系统（如-web-应用程序）。rest-约束条件作为一个整体应用时，将生成一个简单、可扩展、有效、安全、可靠的架构。由于它简便、轻量级以及通过-http-直接传输数据的特性，restful-web-服务成为基于-soap-服务的一个最有前途的替代方案。用于-web-服务和动态-web-应用程序的多层架构可以实现可重用性、简单性、可扩展性和组件可响应性的清晰分离。开发人员可以轻松使用-ajax-和-restful-web-服务一起创建丰富的界面。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是restful？rest-描述了一个架构样式的互联系统（如-web-应用程序）。rest-约束条件作为一个整体应用时，将生成一个简单、可扩展、有效、安全、可靠的架构。由于它简便、轻量级以及通过-http-直接传输数据的特性，restful-web-服务成为基于-soap-服务的一个最有前途的替代方案。用于-web-服务和动态-web-应用程序的多层架构可以实现可重用性、简单性、可扩展性和组件可响应性的清晰分离。开发人员可以轻松使用-ajax-和-restful-web-服务一起创建丰富的界面。"}},[t._v("#")]),t._v(" 什么是RESTful？"),a("br"),t._v("\nREST 描述了一个架构样式的互联系统（如 Web 应用程序）。REST 约束条件作为一个整体应用时，将生成一个简单、可扩展、有效、安全、可靠的架构。由于它简便、轻量级以及通过 HTTP 直接传输数据的特性，RESTful Web 服务成为基于 SOAP 服务的一个最有前途的替代方案。用于 web 服务和动态 Web 应用程序的多层架构可以实现可重用性、简单性、可扩展性和组件可响应性的清晰分离。开发人员可以轻松使用 Ajax 和 RESTful Web 服务一起创建丰富的界面。")]),t._v(" "),a("p",[t._v("简单来说就是一套设计风格。提供了一些设计原则和约束条件。它主要用于客户端和服务器交互类的软件。基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存等机制。")])]),t._v(" "),a("h4",{attrs:{id:"创建资源控制器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建资源控制器"}},[t._v("#")]),t._v(" 创建资源控制器")]),t._v(" "),a("p",[t._v("Laravel 资源路由可以将典型的「CURD」路由指定到一个控制器上。使用 Artisan 命令 "),a("code",[t._v("make:controller")]),t._v("，就能快速创建这样一个控制器：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("php artisan make:controller ArticleController --resource\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"注册路由-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册路由-2"}},[t._v("#")]),t._v(" 注册路由")]),t._v(" "),a("blockquote",[a("p",[t._v("laravel框架的所有控制器默认是访问不了的，必须注册路由才可以访问。")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Route::resource('photos', 'ArticleController');\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("这个路由声明会创建多个路由来处理各种各样的资源操作。前面生成的控制器已经包含了这些操作的方法，还包括了 HTTP 动作和操作 URI 的注释。")]),t._v(" "),a("blockquote",[a("p",[t._v("资源控制器操作处理#")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("动作")]),t._v(" "),a("th",[t._v("URI")]),t._v(" "),a("th",[t._v("操作")]),t._v(" "),a("th",[t._v("路由名称")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("GET")]),t._v(" "),a("td",[t._v("/photos")]),t._v(" "),a("td",[t._v("index")]),t._v(" "),a("td",[t._v("photos.index")])]),t._v(" "),a("tr",[a("td",[t._v("GET")]),t._v(" "),a("td",[t._v("/photos/create")]),t._v(" "),a("td",[t._v("create")]),t._v(" "),a("td",[t._v("photos.create")])]),t._v(" "),a("tr",[a("td",[t._v("POST")]),t._v(" "),a("td",[t._v("/photos")]),t._v(" "),a("td",[t._v("store")]),t._v(" "),a("td",[t._v("photos.store")])]),t._v(" "),a("tr",[a("td",[t._v("GET")]),t._v(" "),a("td",[t._v("/photos/{photo}")]),t._v(" "),a("td",[t._v("show")]),t._v(" "),a("td",[t._v("photos.show")])]),t._v(" "),a("tr",[a("td",[t._v("GET")]),t._v(" "),a("td",[t._v("/photos/{photo}/edit")]),t._v(" "),a("td",[t._v("edit")]),t._v(" "),a("td",[t._v("photos.edit")])]),t._v(" "),a("tr",[a("td",[t._v("PUT/PATCH")]),t._v(" "),a("td",[t._v("/photos/{photo}")]),t._v(" "),a("td",[t._v("update")]),t._v(" "),a("td",[t._v("photos.update")])]),t._v(" "),a("tr",[a("td",[t._v("DELETE")]),t._v(" "),a("td",[t._v("/photos/{photo}")]),t._v(" "),a("td",[t._v("destroy")]),t._v(" "),a("td",[t._v("photos.destroy")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);